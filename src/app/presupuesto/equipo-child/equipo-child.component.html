<div class="row">
  <div class="cell">
    <button class="button primary m-2 small" (click)="agregarEquipo(equi)">Agregar Equipo</button>
  </div>
</div>
<div class="row">
  <div class="cell-10 offset-1">
    <div data-role="accordion" data-one-frame="false" data-show-active="false" data-active-heading-class="bg-pink fg-white">
      <div class="frame" *ngFor="let equipo of ubicacion.equipos">
        <div class="heading">{{equipo.nombre}}</div>
        <div class="content" style="display:none">
          <div class="row">
            <div class="cell">
              <div class="form-group">
                <label>Ubicación</label>
                <select>
                  <option>
                    ubicación 1
                  </option>
                  <option>
                    ubicación 2
                  </option>
                </select>
              </div>
            </div>
            <div class="cell">
              <div class="form-group">
                <label>Precio</label>
                <input disabled type="text" value="{{equipo.precio | currency}}">
              </div>
            </div>
            <div class="cell">
              <div class="form-group">
                <label>Porc</label>
                <p-spinner (onChange)="actualizarTotal()" (keyup)="actualizarTotal()"
                size="30" [(ngModel)]="equipo.porcentaje" [step]="0.25"></p-spinner>
              </div>
            </div>
            <div class="cell">
              <div class="form-group">
                <label>Precio final</label>
                <input disabled type="text" value="{{equipo.precio * equipo.porcentaje | currency}}">
              </div>
            </div>
            <div class="cell">
              <div class="form-group">
                <label>Total equipo + materiales</label>
                <input disabled type="text" value="{{equipo.total | currency}}">
              </div>
            </div>
          </div>
          <hr>
          <div class="row">
            <div class="cell">
              <button class="button primary m-2 small" (click)="agregarMaterial(equipo)">Agregar Material</button>
            </div>
          </div>
          <div class="row">
            <div class="cell">
              <table class="table compact striped">
                <thead>
                  <tr>
                    <th>código</th>
                    <th>nombre</th>
                    <th>precio</th>
                    <th>cantidad</th>
                    <th>total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let material of equipo.materiales">
                    <td>{{material.codigo}}</td>
                    <td>{{material.nombre}}</td>
                    <td>{{material.precio}}</td>
                    <td>{{material.cantidad}}</td>
                    <td>{{material.precio * material.cantidad}}</td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td>
                      Total
                    </td>
                    <td></td><td></td><td></td><td>{{ totalMateriales(equipo) | currency}}</td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>


<!--<div>
  <div class="form-group">
    <label>Equipo</label><span id="toggle" *ngIf="!editaEquipo" class="mif-plus mif-lg fg-blue ml-5 c-pointer" onclick="mostrar()"></span>
    <input type="text" [(ngModel)]="equipoSeleccionado.nombre" disabled/>
  </div>
  <div id="ocultar" class="border bd-cyan" style="display:none">
    <div class="m-10">
      <input type="text" placeholder="Buscar Equipo" (keyup)="actualizar()" [(ngModel)]="txtBuscar" data-role="search" />
      <table class="table compact row-border row-hover">
        <thead>
          <tr>
            <th>
              Nombre
            </th>
            <th>
              Precio
            </th>
            
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let equipo of equipos_filtro | paginate: { itemsPerPage: 5, currentPage: p }" class="c-pointer" (click)="obtener(equipo)">
            <td>
              {{equipo.nombre}}
            </td>
            <td>
              {{equipo.precio}}
            </td>
            
          </tr>
        </tbody>
      </table>
      <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>
  
  </div>
  <div class="form-group">
    <label>Ubicación</label>
    <select [(ngModel)]="ubicacionSeleccionada">
      <option *ngFor="let ubicacion of ubicaciones"[ngValue]="ubicacion" >
        {{ubicacion.nombre}}
      </option>
    </select>
  </div>
  <button class="button mt-3 primary" (click)="agregarEquipoUbicacion()" *ngIf="!editaEquipo">Agregar</button>
  <button class="button mt-3 primary" (click)="actualizarEquipoUbicacion()" *ngIf="editaEquipo">Guardar</button>
</div>
<table class="table">
  <thead>
    <tr>
      <th>
        Equipo
      </th>
      <th>
        Ubicación
      </th>
      <th>
        Editar
      </th>
    </tr>
  </thead>
  <tr *ngFor="let detalle of detalle_equipo_ubi">
    <td>
      {{detalle.equipo.nombre}}
    </td>
    <td>

      {{detalle.ubicacion.nombre}}

    </td>
    <td>
      <button (click)="editarEquipo(detalle.codigo)" *ngIf="!detalle.editable">editar</button>
      <button (click)="cancelarEdicionEquipo(detalle.codigo)" *ngIf="detalle.editable">cancelar</button>
    </td>
  </tr>
</table>
-->